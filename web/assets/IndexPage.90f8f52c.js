import{c as E,f as v,j as c,a as h,h as x,b as w,g as F,m as B,q as L,K as P,r as d,L as y,o as V,C as g,M as f,N as $,O as I,P as b,R as Q,D as k,E as A,J as _,F as p,S as m,T as D}from"./index.c04001a5.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";var q=E({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(n,{slots:a}){const{proxy:{$q:e}}=F(),u=v(B,c);if(u===c)return console.error("QPage needs to be a deep child of QLayout"),c;if(v(L,c)===c)return console.error("QPage needs to be child of QPageContainer"),c;const l=h(()=>{const t=(u.header.space===!0?u.header.size:0)+(u.footer.space===!0?u.footer.size:0);if(typeof n.styleFn=="function"){const o=u.isContainer.value===!0?u.containerHeight.value:e.screen.height;return n.styleFn(t,o)}return{minHeight:u.isContainer.value===!0?u.containerHeight.value-t+"px":e.screen.height===0?t!==0?`calc(100vh - ${t}px)`:"100vh":e.screen.height-t+"px"}}),r=h(()=>`q-page${n.padding===!0?" q-layout-padding":""}`);return()=>x("main",{class:r.value,style:l.value},w(a.default))}});function R(){return v(P)}function N(){let n="0";const a=d([]);let e;const u=R();function s(r){const t=JSON.parse(r.data);a.value.unshift(t.msg)}function l(r,t){a.value=[],e==null||e.removeEventListener(n,s),e==null||e.close(),n=`${Date.now()+Math.trunc(Math.random()*1e3)}`,e=new EventSource(`api/logger/sse/${n}?fileName=${r}&countLast=${t}`),e.addEventListener(n,s),e.onerror=o=>{console.error("SSE error",o),u.notify({message:"\u041E\u0448\u0438\u0431\u043A\u0430, \u043D\u0435 \u0443\u0434\u0430\u0435\u0442\u0441\u044F \u043E\u0442\u043A\u0440\u044B\u0442\u044C \u0444\u0430\u0439\u043B \u0438\u043B\u0438 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F",type:"negative"})}}return{logList:a,reInit:l}}const K={class:"log-view"},M=y({__name:"LogView",props:{filePath:{},countLast:{}},setup(n,{expose:a}){const e=n,{reInit:u,logList:s}=N();return a({reInit:u}),V(()=>{u(e.filePath,e.countLast)}),(l,r)=>(g(),f("div",K,[(g(!0),f($,null,I(b(s),(t,o)=>(g(),f("div",{key:o,class:"log-item"},Q(t),1))),128))]))}});var S=C(M,[["__scopeId","data-v-162319d0"]]);const j={class:"page"},H={class:"control-group row"},z={class:"view"},J=y({name:"IndexPage",__name:"IndexPage",setup(n){const a=d("/var/log/syslog"),e=d(100),u=d(),s=d(),l=h(()=>{var t;return!((t=u.value)!=null&&t.validate())});function r(){s.value.reInit(a.value,e.value)}return(t,o)=>(g(),k(q,{class:"row items-top justify-evenly"},{default:A(()=>[_("div",j,[_("div",H,[p(m,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=i=>a.value=i),hint:"\u041F\u0443\u0442\u044C \u043A \u0444\u0430\u0439\u043B\u0443",class:"file-path",outlined:""},null,8,["modelValue"]),p(m,{outlined:"",ref_key:"rowsCountRef",ref:u,type:"number",modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=i=>e.value=i),rules:[i=>+i>0&&+i<1e3||"\u0414\u043E\u043F\u0443\u0441\u0442\u0438\u043C \u0442\u043E\u043B\u044C\u043A\u043E \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D 0 - 1000"],hint:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0445 \u0441\u0442\u0440\u043E\u043A",class:"delim"},null,8,["modelValue","rules"]),p(D,{label:"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C",class:"apply-button",outline:"",color:"blue",disable:l.value,onClick:r},null,8,["disable"])]),_("div",z,[p(S,{"file-path":a.value,"count-last":e.value,ref_key:"logViewRef",ref:s},null,8,["file-path","count-last"])])])]),_:1}))}});var T=C(J,[["__scopeId","data-v-38ba2a41"]]);export{T as default};
