import{c as F,f as v,j as c,a as h,h as w,b as x,g as B,m as L,q as $,K as P,r as d,L as C,o as V,M as m,C as p,N as g,O as I,P as k,R as b,D as Q,E as A,J as _,F as f,S as y,T as D}from"./index.862b802f.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";var q=F({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(n,{slots:a}){const{proxy:{$q:e}}=B(),u=v(L,c);if(u===c)return console.error("QPage needs to be a deep child of QLayout"),c;if(v($,c)===c)return console.error("QPage needs to be child of QPageContainer"),c;const r=h(()=>{const t=(u.header.space===!0?u.header.size:0)+(u.footer.space===!0?u.footer.size:0);if(typeof n.styleFn=="function"){const s=u.isContainer.value===!0?u.containerHeight.value:e.screen.height;return n.styleFn(t,s)}return{minHeight:u.isContainer.value===!0?u.containerHeight.value-t+"px":e.screen.height===0?t!==0?`calc(100vh - ${t}px)`:"100vh":e.screen.height-t+"px"}}),l=h(()=>`q-page${n.padding===!0?" q-layout-padding":""}`);return()=>w("main",{class:l.value,style:r.value},x(a.default))}});function R(){return v(P)}function N(){let n="0";const a=d([]);let e;const u=R();function o(l){const t=JSON.parse(l.data);a.value.unshift(t.msg)}function r(l,t){a.value=[],e==null||e.removeEventListener(n,o),e==null||e.close(),n=`${Date.now()+Math.trunc(Math.random()*1e3)}`,e=new EventSource(`api/logger/sse/${n}?fileName=${l}&countLast=${t}`),e.addEventListener(n,o),e.onerror=s=>{console.error("SSE error",s),u.notify({message:"\u041E\u0448\u0438\u0431\u043A\u0430, \u043D\u0435 \u0443\u0434\u0430\u0435\u0442\u0441\u044F \u043E\u0442\u043A\u0440\u044B\u0442\u044C \u0444\u0430\u0439\u043B \u0438\u043B\u0438 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F",type:"negative"})}}return{logList:a,reInit:r}}const K={key:0,class:"log-view"},M={key:1,class:"log-view"},S=C({__name:"LogView",props:{filePath:{},countLast:{}},setup(n,{expose:a}){const e=n,{reInit:u,logList:o}=N();return a({reInit:u}),V(()=>{u(e.filePath,e.countLast)}),(r,l)=>m(o).length?(p(),g("div",M,[(p(!0),g(I,null,k(m(o),(t,s)=>(p(),g("div",{key:s,class:"log-item"},b(t),1))),128))])):(p(),g("div",K,"\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430 \u043F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435..."))}});var j=E(S,[["__scopeId","data-v-2e6f224a"]]);const H={class:"page"},z={class:"control-group row"},J={class:"view"},O=C({name:"IndexPage",__name:"IndexPage",setup(n){const a=d("/var/log/syslog"),e=d(100),u=d(),o=d(),r=h(()=>{var t;return!((t=u.value)!=null&&t.validate())});function l(){o.value.reInit(a.value,e.value)}return(t,s)=>(p(),Q(q,{class:"row items-top justify-evenly"},{default:A(()=>[_("div",H,[_("div",z,[f(y,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i),hint:"\u041F\u0443\u0442\u044C \u043A \u0444\u0430\u0439\u043B\u0443",class:"file-path",outlined:""},null,8,["modelValue"]),f(y,{outlined:"",ref_key:"rowsCountRef",ref:u,type:"number",modelValue:e.value,"onUpdate:modelValue":s[1]||(s[1]=i=>e.value=i),rules:[i=>+i>=0&&+i<=1e3||"\u0414\u043E\u043F\u0443\u0441\u0442\u0438\u043C \u0442\u043E\u043B\u044C\u043A\u043E \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D 0 - 1000"],hint:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0445 \u0441\u0442\u0440\u043E\u043A",class:"delim"},null,8,["modelValue","rules"]),f(D,{label:"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C",class:"apply-button",outline:"",color:"blue",disable:r.value,onClick:l},null,8,["disable"])]),_("div",J,[f(j,{"file-path":a.value,"count-last":+e.value,ref_key:"logViewRef",ref:o},null,8,["file-path","count-last"])])])]),_:1}))}});var G=E(O,[["__scopeId","data-v-20ef6748"]]);export{G as default};
